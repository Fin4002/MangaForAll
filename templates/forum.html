{% extends 'base.html' %}
<<<<<<< HEAD
{% block title %}Forum Â· MangaForAll{% endblock %}
{% block content %}
  <h1 class="page-title">Forum</h1>

  <!-- Top 10 Contributors -->
  <div class="top-contributors">
    <h2>Top 10 Contributors</h2>
    <!-- <p>{{ top_contributors | safe }}</p> -->
    <ul>
      {% for contributor in top_contributors %}
        <li><b>{{ contributor.author }}</b> - {{ contributor.total_contributions }} contributions</li>
      {% endfor %}
    </ul>
  </div>

  <a href="{{ url_for('new_post') }}" class="btn">New Post</a>

  {% if posts %}
    <div class="forum-list">
      {% for post in posts %}
        <div class="card forum-post">
          <div class="card-body">
            <h3 class="card-title">{{ post.title }}</h3>
            <p class="card-text">{{ post.content }}</p>
            <small>By {{ post.author }}</small>
            {% if post.image %}
              <img src="{{ url_for('post_image_blob', post_id=post.post_id) }}" alt="Post image" style="max-width:300px;">
            {% endif %}
          </div>

          <div class="card-body">
            <h4 class="mb-2">Comments</h4>
            {% set c_list = comments_by_post.get(post.post_id, []) %}
            {% if c_list %}
              <ul class="space-y-2">
                {% for c in c_list %}
                  <li><b>{{ c.username or 'Anonymous' }}</b>: {{ c.content }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <p>No comments yet.</p>
            {% endif %}

            {% if user %}
              <form method="POST" action="{{ url_for('add_comment', post_id=post.post_id) }}" class="mt-3">
                <textarea name="content" class="input" rows="2" required></textarea><br>
                <button type="submit" class="btn">Add Comment</button>
              </form>
            {% else %}
              <p class="mt-3"><a href="{{ url_for('login') }}">Login</a> to comment</p>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No posts yet. Be the first to post!</p>
  {% endif %}
{% endblock %}




=======
{% block title %}Forum{% endblock %}
{% block content %}
  <div class="grid grid-2">
    <div class="card fade-in">
      <div class="card-header">
        <div class="card-title">Create Topic</div>
      </div>
      <form class="form">
        <label class="label">Title</label>
        <input class="input" placeholder="Keep it relevant. Try.">
        <label class="label">Content</label>
        <textarea class="input" rows="5" placeholder="Say something useful. Or at least coherent."></textarea>
        <button class="btn" type="button">Post</button>
      </form>
    </div>

    <div class="card fade-in">
      <div class="card-header">
        <div class="card-title">Latest Topics</div>
      </div>
      <table class="table">
        <thead>
          <tr><th>Title</th><th>Author</th><th>Replies</th></tr>
        </thead>
        <tbody>
          <tr><td>Welcome to MintForum</td><td>admin</td><td>5</td></tr>
          <tr><td>Rules & Etiquette</td><td>moderator</td><td>2</td></tr>
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
>>>>>>> bded1d1ed0a86288146d4d00cc99e8dc3f5adaf6
